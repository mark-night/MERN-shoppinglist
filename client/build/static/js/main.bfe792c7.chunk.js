(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,a){e.exports=a(78)},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(11),o=a.n(c),u=a(7),l=a(16),s=a(40),i=a(22),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_ITEMS":return Object(i.a)(n);case"ADD_ITEM":return[n].concat(Object(i.a)(e));case"DELETE_ITEM":return Object(i.a)(n);default:return e}},E=a(9),d={token:localStorage.getItem("token"),isAuthenticated:!1,isUserLoading:!1,user:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADING":return Object(E.a)(Object(E.a)({},e),{},{isUserLoading:!0});case"USER_LOADED":return Object(E.a)(Object(E.a)({},e),{},{isUserLoading:!1,isAuthenticated:!0,user:n});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",n.token),Object(E.a)(Object(E.a)({},e),{},{isUserLoading:!1,isAuthenticated:!0},n);case"AUTH_ERROR":case"LOGIN_FAIL":case"REGISTER_FAIL":case"LOGOUT_SUCCESS":return localStorage.removeItem("token"),Object(E.a)(Object(E.a)({},d),{},{token:null});default:return e}},f={msg:null,status:null,id:null},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_ERROR":return Object(E.a)({},n);case"CLEAR_ERROR":return Object(E.a)({},f);default:return e}},R=Object(l.c)({items:m,auth:p,error:O}),b=Object(l.d)(R,Object(l.a)(s.a)),g=a(90),h=a(14),j=a(89),v=a(91),y=a(92),_=a(93),L=a(94),S=a(95),A=a(80),C=a(17),I=a.n(C),k=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"GET_ERROR",payload:{msg:e,status:t,id:a}}},T=function(e){var t=e().auth.token,a={"Content-Type":"application/json"};return t&&(a["x-auth-token"]=t),{headers:a}},D=function(){var e=Object(u.c)();return r.a.createElement(A.a,{onClick:function(){return e({type:"LOGOUT_SUCCESS"})},href:"#"},"Logout")},G=a(99),U=a(81),w=a(82),N=a(83),F=a(84),M=a(85),x=a(86),B=a(87),W=a(88),H=function(e){var t=e.isRegister,a=Object(u.c)(),c=Object(u.d)((function(e){return e.error}),u.b),o=Object(u.d)((function(e){return e.auth.isAuthenticated})),l=Object(n.useReducer)(z,{name:"",email:"",password:""}),s=Object(h.a)(l,2),i=s[0],m=s[1],E=Object(n.useState)(!1),d=Object(h.a)(E,2),p=d[0],f=d[1],O=Object(n.useCallback)((function(){a({type:"CLEAR_ERROR"}),m({type:"reset"}),f((function(e){return!e}))}),[a]),R=Object(n.useCallback)((function(e){e.preventDefault(),a(t?function(e){return function(t){I.a.post("/api/users",e,{headers:{"Content-Type":"application/json"}}).then((function(e){var a=e.data;t({type:"CLEAR_ERROR"}),t({type:"REGISTER_SUCCESS",payload:a})})).catch((function(e){var a=e.response,n=a.data,r=a.status;t(k(n.msg,r,"REGISTER_FAIL")),t({type:"REGISTER_FAIL"})}))}}(i):function(e){return function(t){I.a.post("/api/auth",e).then((function(e){var a=e.data;t({type:"CLEAR_ERROR"}),t({type:"LOGIN_SUCCESS",payload:a})})).catch((function(e){var a=e.response,n=a.data,r=a.status;t(k(n.msg,r,"LOGIN_FAIL")),t({type:"LOGIN_FAIL"})}))}}({email:i.email,password:i.password}))}),[a,i,t]);return Object(n.useEffect)((function(){o&&O()}),[o,O]),r.a.createElement(n.Fragment,null,r.a.createElement(A.a,{onClick:O,href:"#"},t?"Register":"Login"),r.a.createElement(G.a,{isOpen:p,toggle:O},r.a.createElement(U.a,{toggle:O},t?"Register":"Login"),r.a.createElement(w.a,null,c.id===(t?"REGISTER_FAIL":"LOGIN_FAIL")&&r.a.createElement(N.a,{color:"danger"},c.msg),r.a.createElement(F.a,{onSubmit:R},Object.keys(i).filter((function(e){return!!t||"name"!==e})).map((function(e){return r.a.createElement(J,{isRegister:t,key:e,name:e,value:i[e],onChange:function(t){return m({type:e,payload:t})}})})),r.a.createElement(M.a,{color:"dark",style:{marginTop:"2rem"},block:!0},t?"Register":"Login")))))},J=function(e){var t=e.isRegister,a=e.name,n=e.value,c=e.onChange,o="".concat(t?"register":"login","-").concat(a),u=a[0].toUpperCase()+a.slice(1).toLowerCase(),l="name"===a?"text":a;return r.a.createElement(x.a,null,r.a.createElement(B.a,{for:o},u),r.a.createElement(W.a,{className:"mb-3",type:l,name:a,id:o,onChange:function(e){return c(e.target.value)},value:n}))},z=function(e,t){var a=t.type,n=t.payload;switch(a){case"name":return Object(E.a)(Object(E.a)({},e),{},{name:n});case"email":return Object(E.a)(Object(E.a)({},e),{},{email:n});case"password":return Object(E.a)(Object(E.a)({},e),{},{password:n});case"reset":return{name:"",email:"",password:""};default:return e}},P=function(){var e=Object(u.d)((function(e){return e.auth.isAuthenticated})),t=Object(u.d)((function(e){return e.auth.user}),u.b),a=Object(n.useState)(!1),c=Object(h.a)(a,2),o=c[0],l=c[1],s=Object(n.useCallback)((function(){return l((function(e){return!e}))}),[]);return r.a.createElement(j.a,{color:"dark",dark:!0,expand:"sm",className:"mb-5"},r.a.createElement(g.a,null,r.a.createElement(v.a,{href:"/"},"Shopping List"),r.a.createElement(y.a,{onClick:s}),r.a.createElement(_.a,{isOpen:o,navbar:!0},r.a.createElement(L.a,{className:"ml-auto",navbar:!0},r.a.createElement(S.a,null,e?r.a.createElement("span",{className:"navbar-text mr-3"},"Welcome, ",r.a.createElement("strong",null,t.name)):r.a.createElement(H,{isRegister:!1})),r.a.createElement(S.a,null,e?r.a.createElement(D,null):r.a.createElement(H,{isRegister:!0}))))))},$=I.a.create({baseURL:"/api/items"}),q=a(96),K=a(97),Q=a(100),V=a(98),X=function(){var e=Object(u.d)((function(e){return e.items})),t=Object(u.d)((function(e){return e.auth.isAuthenticated})),a=Object(u.c)();return r.a.useEffect((function(){a((function(e){$.get("/").then((function(t){var a=t.data;e({type:"CLEAR_ERROR"}),e({type:"GET_ITEMS",payload:a})})).catch((function(t){var a=t.response,n=a.data,r=a.status;return e(k(n.msg,r))}))}))}),[a]),r.a.createElement(q.a,null,r.a.createElement(Q.a,{className:"shopping-list"},e.map((function(e){var n=e._id,c=e.name;return r.a.createElement(V.a,{key:n,timeout:500,classNames:"fade"},r.a.createElement(K.a,null,t&&r.a.createElement(M.a,{color:"danger",size:"small",className:"remove-btn",onClick:function(){return a((e=n,function(t,a){$.delete("/".concat(e),T(a)).then((function(){t({type:"CLEAR_ERROR"}),t({type:"DELETE_ITEM",payload:a().items.filter((function(t){return t._id!==e}))})})).catch((function(e){var a=e.response,n=a.data,r=a.status;return t(k(n.msg,r))}))}));var e}},"\xd7"),c))}))))},Y=function(){var e=Object(n.useState)(!1),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(h.a)(o,2),s=l[0],i=l[1],m=Object(u.d)((function(e){return e.auth.isAuthenticated})),E=Object(u.d)((function(e){return e.error}),u.b),d=Object(u.c)(),p=Object(n.useCallback)((function(){return c((function(e){return!e}))}),[]),f=Object(n.useCallback)((function(e){e.preventDefault(),d(function(e){return function(t,a){$.post("/",{name:e},T(a)).then((function(e){var a=e.data;t({type:"CLEAR_ERROR"}),t({type:"ADD_ITEM",payload:a})})).catch((function(e){var a=e.response,n=a.data,r=a.status;return t(k(n.msg,r,"ADD_ITEM_ERROR"))}))}}(s))}),[s,d]);return Object(n.useEffect)((function(){"ADD_ITEM_ERROR"===E.id?c(!0):(c(!1),i(""))}),[E.id]),r.a.createElement("div",null,m?r.a.createElement(M.a,{color:"dark",style:{marginBottom:"2rem"},onClick:p},"Add Item"):r.a.createElement("h4",{className:"mb-3 ml-2"},"Please login to manage list."),r.a.createElement(G.a,{isOpen:a,toggle:p},r.a.createElement(U.a,{toggle:p},"Add to shopping list"),r.a.createElement(w.a,null,"ADD_ITEM_ERROR"===E.id&&r.a.createElement(N.a,{color:"danger"},E.msg),r.a.createElement(F.a,{onSubmit:f},r.a.createElement(x.a,null,r.a.createElement(B.a,{for:"item"},"Item to add"),r.a.createElement(W.a,{name:"name",id:"item",onChange:function(e){return i(e.target.value)},value:s}),r.a.createElement(M.a,{color:"dark",style:{marginTop:"2rem"},block:!0},"Add Item"))))))};a(76),a(77);var Z=function(){return Object(n.useEffect)((function(){b.dispatch((function(e,t){e({type:"USER_LOADING"}),I.a.get("/api/auth/user",T(t)).then((function(t){var a=t.data;e({type:"CLEAR_ERROR"}),e({type:"USER_LOADED",payload:a})})).catch((function(t){var a=t.response,n=a.data,r=a.status;e(k(n.msg,r)),e({type:"AUTH_ERROR"})}))}))})),r.a.createElement(u.a,{store:b},r.a.createElement("div",{className:"App"},r.a.createElement(P,null),r.a.createElement(g.a,null,r.a.createElement(Y,null),r.a.createElement(X,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.bfe792c7.chunk.js.map